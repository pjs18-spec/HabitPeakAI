//
//  LongevityDetailView.swift
//  HabitPeakAI
//
//  Created by Justin Sharma on 2025-12-27.
//

import SwiftUI
import SwiftData

struct LongevityDetailView: View {

    @Environment(\.modelContext) private var modelContext

    // âœ… Use StateObject for profileManager
    @State private var profileManager: LongevityProfileManager

    private let longevityHabits = [
        "Zone 2 Lock-In",
        "Strength Anchor",
        "Protein Floor Hit",
        "Glucose Walk",
        "Sleep Defence Mode"
    ]

    // MARK: - Init
    init(modelContext: ModelContext) {
        _profileManager = State(
            wrappedValue: LongevityProfileManager(modelContext: modelContext)
        )
    }

    // MARK: - Body
    var body: some View {
        NavigationStack {
            VStack(spacing: 20) {
                Text("Longevity Habits")
                    .font(.largeTitle.bold())
                    .padding(.top, 20)

                List(longevityHabits, id: \.self) { habit in
                    NavigationLink(
                        destination: Zone2AIView(
                            habitName: habit,
                            modelContext: modelContext
                        )
                    ) {
                        HStack {
                            Image(systemName: "checkmark.circle")
                                .foregroundStyle(.green)
                            Text(habit)
                                .font(.headline)
                        }
                        .padding(.vertical, 8)
                    }
                }
                .listStyle(.insetGrouped)
            }
            .navigationTitle("Longevity")
            .navigationBarTitleDisplayMode(.inline)
        }
    }
}

// MARK: - Preview
#Preview {
    let container = try! ModelContainer(
        for: Habit.self,
        LongevityProfile.self,
        Zone2Session.self
    )
    LongevityDetailView(modelContext: container.mainContext)
}

